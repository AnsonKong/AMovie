(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{102:function(t,e,a){(t.exports=a(2)(!1)).push([t.i,".el-input[data-v-5166f6c9]{max-width:300px}ul[data-v-5166f6c9]{padding:0}",""])},103:function(t,e,a){var r=a(102);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,a(1).default)("24fd1e32",r,!0,{})},112:function(t,e,a){"use strict";a.r(e);var r=a(88),s={name:"Search",data:function(){return{searching:!1,src:null,pageSize:10,keyword:""}},props:["api"],mounted(){this.keyword=this.$route.query.q,this.loadPage()},computed:{currentPage(){return parseInt(this.$route.query.page||1)}},watch:{$route:"onRouteChange"},methods:{onSearch(){this.keyword?this.$router.push({query:{q:this.keyword}}):this.$message({message:"请输入搜索关键字"})},loadPage(){this.$route.query.q&&(window.scrollTo(0,0),this.searching=!0,this.$jsonpHelper(this.api,{q:this.$route.query.q,start:(this.currentPage-1)*this.pageSize,count:this.pageSize},(t,e)=>{t||(this.src=e),this.searching=!1}))},onCurrentPageChange(t){this.$router.push({query:{q:this.$route.query.q,page:t}})},onRouteChange(t){this.loadPage()}},components:{MovieRankItem:r.a}},n=a(9);var i=function(t){a(103)},o=Object(n.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-input",{attrs:{placeholder:"请输入关键字",clearable:""},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:t.searching},on:{click:t.onSearch}},[t._v("搜索")]),t._v(" "),t.src?[a("h1",[t._v("\n\t\t\t"+t._s(t.src.title)+"，共有 "+t._s(t.src.total)+" 条结果\n\t\t")]),t._v(" "),a("ul",t._l(t.src.subjects,function(t){return a("MovieRankItem",{key:t.id,attrs:{src:t}})})),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.pageSize,"current-page":t.currentPage,total:t.src.total},on:{"current-change":t.onCurrentPageChange}})]:t._e()],2)},[],!1,i,"data-v-5166f6c9",null);e.default=o.exports},87:function(t,e,a){"use strict";var r=a(9),s=Object(r.a)({name:"Aka",props:["src","routeName"]},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t._l(t.src,function(e,r){return[0!==r?a("span",[t._v("/")]):t._e(),t._v(" "),t.routeName&&e.id?a("span",[a("router-link",{attrs:{to:{name:t.routeName,params:{id:e.id}}}},[t._v("\n\t\t\t\t"+t._s(e.name)+"\n\t\t\t")])],1):a("span",[t._v("\n\t\t\t"+t._s(e.name||e)+"\n\t\t")])]})],2)},[],!1,null,null,null);e.a=s.exports},88:function(t,e,a){"use strict";var r=a(87),s={name:"MovieRankItem",props:["src"],computed:{parsedTo(){return{path:`/subject/${this.realSubject.id}`}},parsedRate(){return Number((this.realSubject.rating.average/2).toFixed(1))},parsedTitle(){const t=this.realSubject.title,e=this.realSubject.original_title;return t===e?t:`${t} / ${e}`},realSubject(){return this.src.subject||this.src}},components:{Aka:r.a}},n=a(9);var i=function(t){a(90)},o=Object(n.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",[a("tbody",[a("tr",[a("td",{attrs:{valign:"top"}},[a("router-link",{staticClass:"info-pic",attrs:{to:t.parsedTo,title:t.parsedTitle}},[a("img",{attrs:{src:t.realSubject.images.small,width:"115px",height:"171px",alt:t.realSubject.title}})])],1),t._v(" "),a("td",{attrs:{valign:"top"}},[a("ul",{staticClass:"info-list"},[a("li",[a("router-link",{attrs:{to:t.parsedTo,title:t.parsedTitle}},[a("span",{attrs:{alt:t.parsedTitle}},[t._v(t._s(t.parsedTitle))])]),t._v(" "),a("span",{staticClass:"year"},[t._v(t._s("("+t.realSubject.year+")"))]),t._v(" "),t.src.new?a("el-tag",{attrs:{size:"mini"}},[t._v("新上映")]):t._e()],1),t._v(" "),t.src.rank?a("li",[a("span",[t._v("排名: "+t._s(t.src.rank))])]):t._e(),t._v(" "),t.src.box?a("li",[a("span",[t._v("票房: "+t._s(t.src.box))])]):t._e(),t._v(" "),a("li",[t._v("类型: \n\t\t\t\t\t\t"),a("Aka",{attrs:{src:t.realSubject.genres}})],1),t._v(" "),t.realSubject.directors&&t.realSubject.directors.length?a("li",[t._v("导演: \n\t\t\t\t\t\t"),a("Aka",{attrs:{src:t.realSubject.directors,routeName:"celebrity"}})],1):t._e(),t._v(" "),t.realSubject.casts&&t.realSubject.casts.length?a("li",[t._v("主演: \n\t\t\t\t\t\t"),a("Aka",{attrs:{src:t.realSubject.casts,routeName:"celebrity"}})],1):t._e(),t._v(" "),a("li",[a("el-rate",{attrs:{value:t.parsedRate,disabled:"","show-score":"","text-color":"#ff9900"}})],1),t._v(" "),a("li",[a("span",[t._v(t._s(t.realSubject.collect_count)+"人看过")])])])])])])])},[],!1,i,"data-v-2101a86f",null);e.a=o.exports},89:function(t,e,a){(t.exports=a(2)(!1)).push([t.i,".year[data-v-2101a86f]{color:#888}ul[data-v-2101a86f]{padding-left:20px}",""])},90:function(t,e,a){var r=a(89);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,a(1).default)("55668e6e",r,!0,{})}}]);